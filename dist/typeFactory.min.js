!function(t,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof module&&module.exports?module.exports=n():t.typeFactory=n()}(this,function(){function t(t,o){if(n(t))for(var i=0;i<t.length&&!1!==o(t[i],i);i++);else for(var r in t)t.hasOwnProperty(r)&&o(t[r],r)}function n(t){return t&&t.constructor===Array}function o(t){return"[object Object]"===Object.prototype.toString.call(t)}function i(t,n){return"function"==typeof t?t.call(n):t}function r(n){for(var o=1;o<arguments.length;o++)t(arguments[o],function(t,o){void 0!==t&&(n[o]=t)});return n}function e(o,i,r){var u;if(n(i))return u=!1,t(i,function(t){if(e(o,t))return u=!0,!1}),u;u=!0;var f=s.indexOf(i),p=f<0,c=f>=0&&a[f];return p?o instanceof i||(u=!1):"array"===c?!n(o)&&(u=!1):typeof o!==c&&(u=!1),u}function u(t,n,o){var i=(n=n||{}).hasOwnProperty("constructor")?n.constructor:function(){t?t.apply(this,arguments):(this.assignOptions&&(this.writeOptions.apply(this,arguments),this.optionRules&&this.validateOptions(this.options,this.optionRules)),this.initialize&&this.initialize.apply(this,arguments))};if(t){var e=function(){this.constructor=i};e.prototype=t.prototype,i.prototype=new e,r(i,t)}else r(n,f);return o&&r(i,o),r(i.prototype,n),i}var s=[String,Number,Boolean,Function,Object,Array],a=["string","number","boolean","function","object","array"],f={writeOptions:function(n){var e=i(this.defaults,this),u={},s=this;this.optionRules&&t(this.optionRules,function(t,n){u[n]=t.default}),this.optionRules&&t(this.optionRules,function(t,n){o(t)&&void 0!==t.default&&(u[n]=i(t.default,s))}),this.options=r({},e,u,n)},validateOptions:function(n,i){var r=[];return t(i,function(t,i){var u=n[i],s=typeof u;if(!1!==t.required||"undefined"!==s){var a=o(t)?t.type:t;a&&!e(u,a)&&r.push('Invalid type for option "'+i+'" ("'+s+'").'),t.validator&&!t.validator(u)&&r.push('Validation of option "'+i+'" failed.')}}),this.handleValidateOptionsErrors(r)},handleValidateOptionsErrors:function(t){if(t.length)throw new Error(t.join(" "))}};return function(t,n){var o=u(null,t,n);return o.extend=function(t,n){return u(this,t,n)},o}});