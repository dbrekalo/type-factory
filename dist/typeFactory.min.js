!function(t,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof module&&module.exports?module.exports=n():t.typeFactory=n()}(this,function(){function t(t,n){for(var i in t)t.hasOwnProperty(i)&&n(t[i],i)}function n(n){for(var i=1;i<arguments.length;i++)t(arguments[i],function(t,i){void 0!==t&&(n[i]=t)});return n}function i(t,i,e){var s=(i=i||{}).hasOwnProperty("constructor")?i.constructor:function(){t?t.apply(this,arguments):(this.assignOptions&&(this.writeOptions.apply(this,arguments),this.optionRules&&this.validateOptions(this.options,this.optionRules)),this.initialize&&this.initialize.apply(this,arguments))};if(t){var r=function(){this.constructor=s};r.prototype=t.prototype,s.prototype=new r,n(s,t)}else n(i,o);return e&&n(s,e),n(s.prototype,i),s}var o={writeOptions:function(i){var o="function"==typeof this.defaults?this.defaults():this.defaults,e={};this.optionRules&&t(this.optionRules,function(t,n){e[n]=t.default}),this.options=n({},o,e,i)},validateOptions:function(n,i){var o=[];if(t(i,function(t,i){var e=n[i],s=typeof e;!1===t.required&&"undefined"===s||(t.type&&s!==t.type&&o.push('Option "'+i+'" is '+s+", expected "+t.type+"."),t.rule&&!t.rule(e)&&o.push('Option "'+i+'" breaks defined rule.'),!t.instanceOf||e instanceof t.instanceOf||o.push('Option "'+i+'" is not instance of defined constructor.'))}),o.length)throw new Error(o.join(" "));return this}};return function(t,n){var o=i(null,t,n);return o.extend=function(t,n){return i(this,t,n)},o}});